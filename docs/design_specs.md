# OpenCC 配置與 UI 規範

本文件概述了 OpenCC WASM 演示網站的有效配置映射和 UI 狀態邏輯。

## 配置映射 (Configuration Mappings)

下表列出了轉換類型與對應 OpenCC 配置文件之間的映射關係。

| 來源 (Source) | 目標 (Target) | 地域用詞 (Region) | 配置文件 (Config File) | 描述 (Description) |
| :--- | :--- | :--- | :--- | :--- |
| **s** (簡體) | **t** (繁體) | 無 | `s2t.json` | 簡體 → OpenCC 標準繁體 |
| **s** (簡體) | **tw** (台灣) | 無 | `s2tw.json` | 簡體 → 台灣正體 |
| **s** (簡體) | **tw** (台灣) | **啟用** | `s2twp.json` | 簡體 → 台灣正體（含用詞） |
| **s** (簡體) | **hk** (香港) | 無 | `s2hk.json` | 簡體 → 香港繁體 |
| **t** (繁體) | **s** (簡體) | 無 | `t2s.json` | 繁體 → 簡體 |
| **t** (繁體) | **tw** (台灣) | 無 | `t2tw.json` | OpenCC 標準繁體 → 台灣正體 |
| **t** (繁體) | **hk** (香港) | 無 | `t2hk.json` | OpenCC 標準繁體 → 香港繁體 |
| **t** (繁體) | **jp** (日本) | 無 | `t2jp.json` | 繁體 → 日文新字體 |
| **tw** (台灣) | **s** (簡體) | 無 | `tw2s.json` | 台灣正體 → 簡體 |
| **tw** (台灣) | **s** (簡體) | **啟用** | `tw2sp.json` | 台灣正體 → 簡體（含用詞） |
| **tw** (台灣) | **t** (繁體) | 無 | `tw2t.json` | 台灣正體 → OpenCC 標準繁體 |
| **hk** (香港) | **s** (簡體) | 無 | `hk2s.json` | 香港繁體 → 簡體 |
| **hk** (香港) | **t** (繁體) | 無 | `hk2t.json` | 香港繁體 → OpenCC 標準繁體 |
| **jp** (日本) | **t** (繁體) | 無 | `jp2t.json` | 日文新字體 → 繁體 |

## UI 狀態邏輯 (UI State Logic)

UI 控件（來源、目標、地域用詞）具有特定的驗證和自動選擇規則：

### 1. 目標可用性 (Target Availability)
- **規則**：僅當所選的 `來源 -> 目標` 組合存在有效的配置文件時，目標選項才可用。
- **同源**：來源等於目標的轉換（例如 `s -> s`）視為無效並被**禁用**。
- **自動選擇**：
    - 如果當前選擇的目標變為無效（例如更改來源導致當前目標變為“同源”），系統會**自動選擇第一個可用的有效目標**。
    - **強制重置**：當用戶更改「來源」時，系統會**強制將目標重置為列表中第一個有效選項**（即最上面的選項），以確保用戶意識到轉換路徑已變更。

### 2. 地域用詞轉換 (Regional Conversion) 可用性
- **規則**：「地域用詞轉換」（標記為「轉換地域用詞」）選項**嚴格限制**於特定組合。
- **允許的組合**：
    - `s -> tw`
    - `tw -> s`
- **行為**：
    - 如果 來源/目標 匹配允許的組合：「轉換地域用詞」單選按鈕**啟用**。
    - 如果 來源/目標 不匹配允許的組合：「轉換地域用詞」單選按鈕**禁用**，並強制選中「不轉換」。

### 3. 默認偏好 (Default Preferences)
- **來源/目標變更時**：如果新的 來源/目標 組合支持地域用詞轉換（即 `s <-> tw`），系統默認將地域選項設為**啟用**。
- **手動選擇時**：如果用戶手動更改了地域選項（例如在 `s -> tw` 時關閉了它），該選擇會被保留，直到下一次 來源 或 目標 發生變更。

### 4. 進階配置模態框 (Advanced Configuration Modal)
- **同步**：從「進階配置」模態框中選擇一個配置（例如手動點擊 `s2twp.json`）將**自動更新** 來源、目標 和 地域用詞 的單選按鈕以匹配該配置。

### 5. 轉換狀態與交互 (Status & Interaction)
- **按鈕位置**：轉換按鈕位於輸入與輸出框的中間。
- **狀態流轉**：
    - **初始化**：狀態顯示 "準備就緒" (綠色)。
    - **轉換中**：點擊轉換後，狀態變更為 "轉換中..."。
    - **轉換完成**：轉換成功後，狀態顯示 "轉換完成" (綠色)。
    - **重置**：當用戶編輯輸入框內容時，狀態自動重置為 "準備就緒"，提示用戶可以再次進行轉換。
